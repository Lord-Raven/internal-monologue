# All of these fields are optional, as is this file itself,
#   in which case these values can be managed in the UI.

# The name of the stage.
project_name: "Internal Monologue"

# A short tagline to show in search.
tagline: "Empower thoughtful bots—who keep those thoughts to themselves."

creator_notes: "
<p><h3>Purpose</h3>
<p>
This simple stage introduces a preliminary LLM call that generates thoughts that are then included in the ultimate response request.
</p>
<p>
By default, that preliminary call prompts the LLM to generate internal thoughts based on the character's perception of their situation, current goals, and possible next moves. 
These thoughts are fed into the response prompt with instruction to tacitly consider and act upon them if appropriate. 
The goal of the default application is to give characters more adherence to their personalities and plans, so they make more thoughtful choices without _sharing_ those thoughts
—which is great for characters with ulterior motives or secrets to maintain.
</p>
<br>
<p><h3>Usage</h3></p>
<p>
Simply search for and add this stage to your chat from Chat Settings. If you are a botmaker, you can add the stage to your bot for all users from the bot's card page.
</p>
<p>
The monologue is generated after each user input, which entails an additional call to the LLM. 
Crucially, if you swipe, the same thoughts will be used, and if you edit your input, those changes will not trigger new thoughts. 
You will need to submit a new input to generate different thoughts.
</p>
<p>
If you don't mind spoilers—or just need to know what on Earth the bot was thinking—, every generated monologue is output to the browser's console.
</p>
<br>
<p><h3>Configuration</h3></p>
<p>
The exact prompts used by the stage to generate thoughts and to include those thoughts in the response request are exposed through the stage's configuration. 
This allows users or botmakers to potentially use this stage for a variety of other applications that involve a preliminary LLM call. 
</p>
<p>
Maybe you want to request generated content that gets fully considered while generating the response—a purpose entirely removed from internal monologues. 
Maybe you just want to modify the request prompt to remove the \"tacit\" instruction, so the response is free to describe the character's thoughts. 
</p>
"

# 'PUBLIC', 'PRIVATE', or 'UNLISTED'.
visibility: 'PUBLIC'

# 'ADJACENT' | 'NONE' | 'COVER' | 'FULLSCREEN'
# 'ADJACENT' is default. The frame will display on the side of the
#   chat on desktop and above/in the top half of the chat on mobile.
# 'NONE' will not display, only run.
# 'COVER' will, indeed, cover the chat history completely,
#   but leave the text input box.
# 'FULLSCREEN' will make nothing below the header bar
#   show except for your stage.
position: 'NONE'

# Self-explanatory.
tags:
 - 'Stage'
 - 'Add-On'
 - 'Utility'
 - 'Quality of Life'
 - 'SFW'

# The schema of any user-supplied config.
# If your stage requires a configuration but has no
#   defined schema, it won't work.
config_schema:
  title: Internal Monologue Settings
  type: object
  properties:
    #perSwipeMode:
    #  title: Generation Point
    #  description: Determines whether the content is generated per user input (conserve requests and reduce per-swipe overhead) or per swipe (more dynamic swipe results).
    #  type: string
    #  default: Per Input
    #  enum: ["Per Input", "Per Swipe"]
    generationPrompt:
      title: Generation Prompt
      description: The prompt used to generate thought or other preliminary content.
      type: string
      default: Deeply analyze and consider {{char}}'s description and recent events in this narrative, then output a couple brief sentences of {{char}}'s current, honest thoughts, shaped by their personality, motives, other characters, and ongoing events. Describe their true opinions and the actions they are considering in this moment before promptly ending this response.
    requestPrompt:
      title: Request Prompt
      description: The prompt used to include the preliminary content in the final response.
      type: string
      default: These are {{char}}'s internal thoughts:\n\n{{content}}\n\nTacitly consider these thoughts when depicting this character's actions or dialogue, if they are present in this scene.
    

# The schema of the state that you store.
# This isn't needed even if you do store state,
#   and is here more for future use cases to
#   optimize storage.
state_schema:
  init:
    type: object
  message:
    type: object
  chat:
    type: object

# Whether to publish as 'Anonymous' instead of under your username.
# is_anonymous: false

# Self-explanatory.
# ratings_disabled: false

# This is here for future cases where ex. you need user secrets,
#    but currently does nothing.
# permissions:

# extension_id is automatically generated on push with a new project;
#    you should not make or set this value.
# github_path will be added if it does not exist. It is the URL of the repo.


github_path: 'https://github.com/Lord-Raven/internal-monologue'


extension_id: 'internal-monologue-d50aac26e9ee'

